api:
  vars:
    ENV: review

  initContainers:
    - name: import
      image: "{{ .Values.global.registry }}/{{ .Values.global.projectName }}/{{
        .Values.global.imageRepository }}/api:{{ .Values.global.imageTag }}"
      command: ["/bin/sh", "-c"]
      args:
        - |
          yarn strapi import --force -f seed-data.tar.gz
      envFrom:
        - secretRef:
            name: pg-app
        - secretRef:
            name: api
        - secretRef:
            name: ozensemble-dev-app-access-key
      env:
        - name: DATABASE_HOST
          value: "$(PGHOST)"
        - name: DATABASE_PORT
          value: "$(PGPORT)"
        - name: DATABASE_NAME
          value: "$(PGDATABASE)"
        - name: DATABASE_USERNAME
          value: "$(PGUSER)"
        - name: DATABASE_PASSWORD
          value: "$(PGPASSWORD)"
        - name: HOST
          value: "0.0.0.0"
        - name: PORT
          value: "1337"
        - name: DATABASE_CLIENT
          value: postgres
